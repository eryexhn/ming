(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{368:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_1、node-js是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、node-js是什么"}},[s._v("#")]),s._v(" 1、Node.js是什么")]),s._v(" "),a("h2",{attrs:{id:"_1-1、特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、特性"}},[s._v("#")]),s._v(" 1.1、特性")]),s._v(" "),a("p",[s._v("Node.js可以解析JS代码（没有浏览器安全级别的限制）提供很多系统级别的API，如：")]),s._v(" "),a("ul",[a("li",[s._v("文件的读写(File System)")]),s._v(" "),a("li",[s._v("进程的管理(Process)")]),s._v(" "),a("li",[s._v("网络通信(HTTP/HTTPS)")])]),s._v(" "),a("h2",{attrs:{id:"_1-2、举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、举例"}},[s._v("#")]),s._v(" 1.2、举例")]),s._v(" "),a("h3",{attrs:{id:"_1-2-1、浏览器安全级别的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1、浏览器安全级别的限制"}},[s._v("#")]),s._v(" 1.2.1、浏览器安全级别的限制")]),s._v(" "),a("p",[a("strong",[s._v("Ajax测试")])]),s._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[s._v("DOCTYPE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("viewport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("width=device-width, initial-scale=1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("browser-safe-sandbox"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("browser-safe-sandbox"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" xhr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'get'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://m.maoyan.com/ajax/moreClassicList?sortId=1&showType=3&limit=10&offset=30&optimus_uuid=A5518FF0AFEC11EAAB158D7AB0D05BBBD74C9789D9F649898982E6542C7DD479&optimus_risk_level=71&optimus_code=10'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            xhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])])]),a("p",[s._v("浏览器预览")]),s._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("browser-sync start --server --files **/* --directory\n")])])]),a("h3",{attrs:{id:"_1-2-2、文件的读写-file-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2、文件的读写-file-system"}},[s._v("#")]),s._v(" 1.2.2、文件的读写(File System)")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./ajax.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_1-2-3、进程的管理-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3、进程的管理-process"}},[s._v("#")]),s._v(" 1.2.3、进程的管理(Process)")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("argv")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("运行")]),s._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node 2.3-process.js argv1 argv2\n")])])]),a("h3",{attrs:{id:"_1-2-4、网络通信-http-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4、网络通信-http-https"}},[s._v("#")]),s._v(" 1.2.4、网络通信(HTTP/HTTPS)")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nhttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text/plain"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello nodejs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h1",{attrs:{id:"_2、node相关工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、node相关工具"}},[s._v("#")]),s._v(" 2、Node相关工具")]),s._v(" "),a("h2",{attrs:{id:"_2-1、nvm-node-version-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、nvm-node-version-manager"}},[s._v("#")]),s._v(" 2.1、NVM:Node Version Manager")]),s._v(" "),a("p",[a("strong",[s._v("Mac安装nvm")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://github.com/nvm-sh/nvm/blob/master/README.md\n")])])]),a("p",[a("strong",[s._v("Windows安装nvm")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://github.com/coreybutler/nvm-windows/releases\n")])])]),a("h3",{attrs:{id:"_2-1-1、windows有两个版本的安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1、windows有两个版本的安装包"}},[s._v("#")]),s._v(" 2.1.1、windows有两个版本的安装包")]),s._v(" "),a("ul",[a("li",[s._v("nvm-noinstall.zip：绿色免安装板，但使用时需进行配置")]),s._v(" "),a("li",[s._v("nvm-setup.zip：安装版，推荐使用")])]),s._v(" "),a("h3",{attrs:{id:"_2-1-2、安装流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2、安装流程"}},[s._v("#")]),s._v(" 2.1.2、安装流程")]),s._v(" "),a("p",[s._v("本次演示的是安装版。")]),s._v(" "),a("p",[s._v("1、双击安装文件 nvm-setup.exe")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/775046/201904/775046-20190411160657751-1529010875.png",alt:"img"}})]),s._v(" "),a("p",[s._v("2、选择nvm安装路径")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/775046/201904/775046-20190411160816834-99504468.png",alt:"img"}})]),s._v(" "),a("p",[s._v("3、选择nodejs路径")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/775046/201904/775046-20190411161045308-1947410693.png",alt:"img"}})]),s._v(" "),a("p",[s._v("4、确认安装即可")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/775046/201904/775046-20190411171705646-891139870.png",alt:"img"}})]),s._v(" "),a("p",[s._v("5、安装完确认")]),s._v(" "),a("p",[s._v("打开CMD，输入命令 nvm ，安装成功则如下显示。可以看到里面列出了各种命令，本节最后会列出这些命令的中文示意。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/775046/201904/775046-20190411172641876-1326770838.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_2-1-3、安装-管理node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3、安装-管理node-js"}},[s._v("#")]),s._v(" 2.1.3、安装/管理Node.js")]),s._v(" "),a("p",[s._v("查看本地安装的所有版本；有可选参数available，显示所有可下载的版本。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nvm list [available]\n")])])]),a("p",[s._v("安装，命令中的版本号可自定义，具体参考命令"),a("code",[s._v("nvm list")]),s._v("查询出来的列表")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nvm install 11.13.0/v11.13.0\n")])])]),a("p",[s._v("使用特定版本")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nvm use 11.13.0/v11.13.0\n")])])]),a("p",[s._v("卸载")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nvm uninstall 11.13.0/v11.13.0\n")])])]),a("h3",{attrs:{id:"_2-1-4、命令提示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4、命令提示"}},[s._v("#")]),s._v(" 2.1.4、命令提示")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("nvm arch")]),s._v("：显示node是运行在32位还是64位。")]),s._v(" "),a("li",[a("code",[s._v("nvm install <version> [arch]")]),s._v("：安装node，version是特定版本也可以是最新稳定版本latest。可选参数arch指定安装32位还是64位版本，默认是系统位数。可以添加--insecure绕过远程服务器的SSL。")]),s._v(" "),a("li",[a("code",[s._v("nvm list [available]")]),s._v("：显示已安装的列表。可选参数available，显示可安装的所有版本。list可简化为ls。")]),s._v(" "),a("li",[a("code",[s._v("nvm on")]),s._v("：开启node.js版本管理")]),s._v(" "),a("li",[a("code",[s._v("nvm off")]),s._v("：关闭node.js版本管理")]),s._v(" "),a("li",[a("code",[s._v("nvm proxy [url]")]),s._v("：设置下载代理。不加可选参数url，显示当前代理。将url设置为none则移除代理。")]),s._v(" "),a("li",[a("code",[s._v("nvm node_mirror [url]")]),s._v("：设置Node镜像。https://nodejs.org/dist/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。")]),s._v(" "),a("li",[a("code",[s._v("nvm npm_mirror [url]")]),s._v("：设置npm镜像。https://github.com/npm/cli/archive/。如果不写url，则使用默认url。设置后可至安装目录setting.txt文件查看，也可直接在该文件操作。")]),s._v(" "),a("li",[a("code",[s._v("nvm uninstall <version>")]),s._v("：卸载指定版本node。")]),s._v(" "),a("li",[a("code",[s._v("nvm use [version] [arch]")]),s._v("：使用指定版本node。可指定32/64位。")]),s._v(" "),a("li",[a("code",[s._v("nvm root [path]")]),s._v("：设置存储不同版本node的目录。如果未设置，默认使用当前目录。")]),s._v(" "),a("li",[a("code",[s._v("nvm version")]),s._v("：显示nvm版本。version可简化为v。")])]),s._v(" "),a("h3",{attrs:{id:"_2-1-5、命令失效问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-5、命令失效问题"}},[s._v("#")]),s._v(" 2.1.5、命令失效问题")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210918103051505.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAQ2hhcmxp4LmR,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),s._v(" "),a("p",[s._v("错误提示：exit status 1: ��û���㹻��Ȩ��ִ�д˲�����")]),s._v(" "),a("p",[s._v("换目录重新安装多次都没用")]),s._v(" "),a("p",[s._v("猜测应该是权限问题")]),s._v(" "),a("p",[s._v("遂将cmd以管理员身份运行")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210918103230705.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAQ2hhcmxp4LmR,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),s._v(" "),a("p",[s._v("或者是在安装nvm之前安装了node，所以要先卸载之前安装的node")]),s._v(" "),a("p",[s._v("或者安装目录不在根目录，有中文这些情况发生")]),s._v(" "),a("h2",{attrs:{id:"_2-2、npm-node-package-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、npm-node-package-manager"}},[s._v("#")]),s._v(" 2.2、NPM：node package manager")]),s._v(" "),a("h3",{attrs:{id:"_2-2-1、什么是npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1、什么是npm"}},[s._v("#")]),s._v(" 2.2.1、什么是NPM")]),s._v(" "),a("p",[s._v("NPM的全称是Node Package Manager，是随同NodeJS一起安装的包管理工具，能解决NodeJS代码部署上的很多问题，常见的使用场景有以下几种：")]),s._v(" "),a("ul",[a("li",[s._v("允许用户从NPM服务器下载别人编写的第三方包到本地使用")]),s._v(" "),a("li",[s._v("允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用")]),s._v(" "),a("li",[s._v("允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用")])]),s._v(" "),a("p",[s._v("npm由三个独立的部分组成：网站、注册表(registry)和命令行工具(CLI)。网站主要是让用户查找package的；注册表是一个巨大的数据库，保存了每个package信息的；命令行工具是开发者用来发布自己的package到注册表或者下载所需package的工具。")]),s._v(" "),a("p",[s._v("现nodejs已经集成了npm，所以直接安装nodejs即可。")]),s._v(" "),a("h3",{attrs:{id:"_2-2-2、什么是包-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2、什么是包-模块"}},[s._v("#")]),s._v(" 2.2.2、什么是包/模块")]),s._v(" "),a("p",[s._v('nodejs以包的形式组织程序模块，而包的定义却十分简单——包含文件内容符合规范packagr.json文件的目录或归档文件，并通过"package-name"@"version"来唯一标识每个包。')]),s._v(" "),a("p",[a("strong",[s._v("package.json")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdn.net/20180314200014880?watermark/2/text/Ly9ibG9nLmNzZG4ubmV0L0ZpZ2h0aW5nX05vMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70",alt:"这里写图片描述"}})]),s._v(" "),a("p",[s._v("包的定义和NPM都围绕着package.json文件做文章，package.json文件其实就相当于JAVA中的MANIFEST,MF文件，用于存放模块的名臣、版本、作者、机构、模块入口、依赖项等信息。")]),s._v(" "),a("p",[a("code",[s._v("npm init")])]),s._v(" "),a("p",[a("code",[s._v("npm init -y")])]),s._v(" "),a("p",[s._v("命令在当前工作目录下以用户引导的方式创建一个全新的package.json文件。"),a("code",[s._v("-y")]),s._v("就是所有选项都为yes。")]),s._v(" "),a("p",[a("code",[s._v("npm help json")])]),s._v(" "),a("p",[s._v("命令打开帮助文档，并根据实际的项目需求自行初始化package.json的项目即可。")]),s._v(" "),a("p",[s._v("下面将对基础配置项进行叙述：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("name：必选项，表示模块名称。命名时不能包含js、node、和url中需要转义的字符，不能以"),a("code",[s._v(".")]),s._v("和"),a("code",[s._v("_")]),s._v("为开头。")])]),s._v(" "),a("li",[a("p",[s._v("version：必选项，表示模块的版本号。版本号以主版本号(Major).副版本号(Minor).补丁版本号(Patch)构成(如1.2.0)。而engines、dependencies和devDependencies等配置项中可使用语义化版本号语法，具体如下(假设当前版本号是1.1.0)：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("兼容模式新发布的小版本、补丁版本：^1.1.0、1.x、1")]),s._v(" "),a("p",[s._v("^锁定主版本号，次版本号和补丁版本号为最新")])]),s._v(" "),a("li",[a("p",[s._v("兼容模块新发布的补丁版本：~1.1.0、1.1.x、1.1")]),s._v(" "),a("p",[s._v("~锁定主版本号和次版本号，补丁版本号为最新")])]),s._v(" "),a("li",[a("p",[s._v("兼容模块新发布的大版本、小版本、补丁版本：*、x")]),s._v(" "),a("p",[s._v("*为最新版本")])]),s._v(" "),a("li",[a("p",[s._v("不加任何符号，就是锁定全部的版本")])])])]),s._v(" "),a("li",[a("p",[s._v("main：必选项，模块入口文件相对路径(相对于模块跟目录)")])]),s._v(" "),a("li",[a("p",[s._v("description：可选项，表示模块功能描述，显示在"),a("code",[s._v('npm search "packagr-name"')]),s._v("中")])]),s._v(" "),a("li",[a("p",[s._v("keywords：可选项，数组类型，表示模块的关键字，显示在"),a("code",[s._v('npm search "package-name"')]),s._v("中")])]),s._v(" "),a("li",[a("p",[s._v("homepage：可选项，包的官网url")])]),s._v(" "),a("li",[a("p",[s._v("author：可选项，表示包的作者姓名")])]),s._v(" "),a("li",[a("p",[s._v("contributors：可选项，包的其他贡献者姓名")])]),s._v(" "),a("li",[a("p",[s._v("repository：可选项，源码托管地址")])]),s._v(" "),a("li",[a("p",[s._v("scripts：可选项，自定义在cli中输入"),a("code",[s._v('npm "script"')]),s._v("时实际执行的程序。npm默认提供大量的script供我们调用")])]),s._v(" "),a("li",[a("p",[s._v("engines：可选项，依赖的node版本")])]),s._v(" "),a("li",[a("p",[s._v("dependencies、devDependencies：可选项，用于配置模块的生产环境依赖包和开发环境依赖包。当执行"),a("code",[s._v("npm install")]),s._v("时，npm会根据这两个配置项的值去下载安装相关的依赖包。两者的区别是devDependencies是模块开发过程的依赖包(如：grunt只在开发时有用的模块)，并且当其他模块需要依赖当前模块时，当通过"),a("code",[s._v('npm intsall "package-name"')]),s._v("时会自动下载安装dependencies的包而不会下载devDependencies的包。如果依赖包没有安装，npm会自动将依赖包安装在node_module的目录下。")])])]),s._v(" "),a("h3",{attrs:{id:"_2-2-3、常用npm命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3、常用npm命令"}},[s._v("#")]),s._v(" 2.2.3、常用npm命令")]),s._v(" "),a("ul",[a("li",[s._v("查看模块的版本： "),a("code",[s._v("npm version")])]),s._v(" "),a("li",[s._v("安装模块： "),a("code",[s._v("npm install <Module Name>")])]),s._v(" "),a("li",[s._v("查看所有全局安装的模块： "),a("code",[s._v("npm list -g")])]),s._v(" "),a("li",[s._v("查看某个模块的版本号： "),a("code",[s._v("npm list <Module Name>")])]),s._v(" "),a("li",[s._v("卸载模块： "),a("code",[s._v("npm uninstall <Module Name>")])]),s._v(" "),a("li",[s._v("更新模块： "),a("code",[s._v("npm update <Module Name>")])]),s._v(" "),a("li",[s._v("搜索模块： "),a("code",[s._v("npm search <Module Name>")])])]),s._v(" "),a("h3",{attrs:{id:"_2-2-4、模块操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4、模块操作"}},[s._v("#")]),s._v(" 2.2.4、模块操作")]),s._v(" "),a("p",[a("strong",[s._v("启动模块")])]),s._v(" "),a("p",[s._v("该命令写在package.json文件scripts的start字段中，可以自定义命令来配置一个服务器环境和安装一系列的必要程序，如")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gulp -ws"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("此时在cmd中输入"),a("code",[s._v("npm start")]),s._v("命令相当于执行gulpfile.js文件自定义的watch和server命令。")]),s._v(" "),a("p",[s._v("如果package.json文件没有设置start，则将直接启动node server.js")]),s._v(" "),a("p",[a("strong",[s._v("停止模块")])]),s._v(" "),a("p",[a("code",[s._v("npm stop [--<args>]")])]),s._v(" "),a("p",[a("strong",[s._v("重新启动模块")])]),s._v(" "),a("p",[a("code",[s._v("npm restart [--<args>]")])]),s._v(" "),a("p",[a("strong",[s._v("测试模块")])]),s._v(" "),a("p",[a("code",[s._v("npm test [--<args>]")])]),s._v(" "),a("p",[s._v("该命令写在package.json文件scripts的test字段中，可以自定义该命令来执行一些操作，如")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gulp release"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("此时在cmd中输入"),a("code",[s._v("npm test")]),s._v("命令相当于执行gulpfile.js文件自定义的release命令")]),s._v(" "),a("h3",{attrs:{id:"_2-2-5、npm-install安装模块详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-5、npm-install安装模块详解"}},[s._v("#")]),s._v(" 2.2.5、npm install安装模块详解")]),s._v(" "),a("p",[s._v("安装包，默认会安装最新的版本")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp")])]),s._v(" "),a("p",[s._v("指定安装版本")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp@4.6.5")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alias: npm i\ncommon options: [-S|--save|-D|--save-dev|-O|--save-optional] [-E|--save-exact] [--dry-run]\n")])])]),a("p",[a("strong",[s._v("保存安装包信息")])]),s._v(" "),a("p",[s._v("模块的依赖都被写入了package.json文件后，他人打开项目的根目录(项目开源、内部团队合作)，使用"),a("code",[s._v("npm install")]),s._v("命令可以根据dependencies配置安装所有的依赖包")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("-S,--save安装包信息将加入到dependencies（生产阶段的依赖）")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp --save")]),s._v("或"),a("code",[s._v("npm install -S")])]),s._v(" "),a("p",[s._v("package.json文件的dependencies字段：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gulp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.9.1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("-D,--save-dev安装包信息将加入到devDependencies（开发阶段的依赖），所以开发阶段一般使用它")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp --save-dev")]),s._v("或"),a("code",[s._v("npm install gulp -D")])]),s._v(" "),a("p",[s._v("package.json文件的devDependencies字段：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gulp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.9.1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("-O,--save-optional安装包信息将加入到optionalDependencies（可选阶段的依赖）")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp --save-optional")]),s._v("或"),a("code",[s._v("npm install gulp -O")])]),s._v(" "),a("p",[s._v("package.json文件的optionalDependencies字段：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"optionalDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gulp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.9.1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("-E,--save-exact精确安装指定模块版本")]),s._v(" "),a("p",[a("code",[s._v("npm install gulp --save-exact")]),s._v("或"),a("code",[s._v("npm install gulp -E")])]),s._v(" "),a("p",[s._v("输入命令"),a("code",[s._v("npm install gulp -ES")]),s._v(",留意package.json文件的dependencies字段，以看出版本号中的^消失了。")])])]),s._v(" "),a("p",[a("strong",[s._v("本地安装与全局安装")])]),s._v(" "),a("p",[s._v("npm的包安装分为本地安装(local)、全局安装(global)两种：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install express      # 本地安装\nnpm install express -g   # 全局安装\n")])])]),a("p",[s._v("如果出现以下错误："),a("code",[s._v("npm err! Error: connect ECONNREFUSED 127.0.0.1:8087")]),s._v("\n解决办法为："),a("code",[s._v("$ npm config set proxy null")])]),s._v(" "),a("p",[a("strong",[s._v("本地安装")])]),s._v(" "),a("ol",[a("li",[s._v("将安装包放在 ./node_modules 下（运行 npm 命令时所在的目录），如果没有 node_modules 目录，会在当前执行 npm 命令的目录下生成 node_modules 目录。")]),s._v(" "),a("li",[s._v("可以通过 require() 来引入本地安装的包。")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cd ~/desktop\n$ mkdir gp-project\n$ cd gp-project\n$ npm install underscore\n$ npm list (ls)\n")])])]),a("p",[a("strong",[s._v("全局安装")])]),s._v(" "),a("ol",[a("li",[s._v("将安装包放在 /usr/local 下或者你 node 的安装目录。")]),s._v(" "),a("li",[s._v("可以直接在命令行里使用。")])]),s._v(" "),a("p",[s._v("注：补丁版本一般为双数，单数基本上都是在进行测试或修改")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install forever --global (-g)\n$ forever\n$ npm uninstall forever --global\n$ forever\n")])])]),a("p",[a("strong",[s._v("全局安装包的目录")])]),s._v(" "),a("ul",[a("li",[s._v("Mac")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/Users/felix/.nvm/versions/node/nvm各个版本/bin/\n")])])]),a("ul",[a("li",[s._v("Windows")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\你的用户名\\AppData\\Roaming\\npm\\node_modules\n")])])]),a("h3",{attrs:{id:"_2-2-6、package-json初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-6、package-json初始化"}},[s._v("#")]),s._v(" 2.2.6、package.json初始化")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ pwd\n$ npm init -y\n$ ls\n$ cat package.json\n")])])]),a("h3",{attrs:{id:"_2-2-7、使用package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-7、使用package-json"}},[s._v("#")]),s._v(" 2.2.7、使用package.json")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install underscore --save\n$ cat package.json\n$ npm install lodash --save-dev\n$ cat package.json\n$ rm -rf node_modules\n$ ls\n$ npm install\n$ npm uninstall underscore --save\n$ npm list | grep underscore\n$ cat package.json\n")])])]),a("h3",{attrs:{id:"_2-2-8、安装指定版本的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-8、安装指定版本的包"}},[s._v("#")]),s._v(" 2.2.8、安装指定版本的包")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ pwd\n$ npm list  //安装了什么包，以及包里依赖的包的列表\n$ npm info underscore //包的信息\n$ npm view underscore versions //包的各个版本列表\n$ npm install underscore@1.8.0 //安装包的某个版本  这样的方式安装完会带^，也就是主版本固定，其他子版本跟补丁版本为最新\n$ npm list\n$ npm uninstall underscore //卸载包\n$ npm list \n")])])]),a("h3",{attrs:{id:"_2-2-9、更新本地安装的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-9、更新本地安装的包"}},[s._v("#")]),s._v(" 2.2.9、更新本地安装的包")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm info underscore\n$ npm view underscore versions\n$ npm install underscore@1.4.4 --save-dev\n$ npm list | grep gulp\n$ npm outdated //~2.0.0表示patch, ^2.0.0表示minor *表示xx最新版本\n$ npm list | grep gulp\n$ npm update\n")])])]),a("h3",{attrs:{id:"_2-2-10、清除缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-10、清除缓存"}},[s._v("#")]),s._v(" 2.2.10、清除缓存")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm cache clean --force\n")])])]),a("h3",{attrs:{id:"_2-2-11、上传自己的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-11、上传自己的包"}},[s._v("#")]),s._v(" 2.2.11、上传自己的包")]),s._v(" "),a("p",[a("strong",[s._v("编写模块")])]),s._v(" "),a("p",[s._v("保存为index.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("sayHello")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("初始化包描述文件")])]),s._v(" "),a("p",[s._v("npm init package.json")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gp19-npm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gp19 self module"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"make test"')]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git+https://github.com/lurongtao/gp19-npm.git"')]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Felixlu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bugs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/lurongtao/gp19-npm/issues"')]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"homepage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/lurongtao/gp19-npm#readme"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("注册npm仓库账号")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://www.npmjs.com 上面的账号\nfelix_lurt/qqmko09ijn\n$ npm adduser\n")])])]),a("p",[a("strong",[s._v("上传包")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm publish\n")])])]),a("p",[s._v("坑：403 Forbidden")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("查看npm源：npm config get registry\n切换npm源方法一：npm config set registry http://registry.npmjs.org\n切换npm源方法二：nrm use npm\n")])])]),a("p",[a("strong",[s._v("安装包")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install gp19-npm\n")])])]),a("p",[a("strong",[s._v("卸载包")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("查看当前项目引用了哪些包 ：\nnpm ls\n卸载包：\nnpm unpublish --force\n")])])]),a("p",[a("strong",[s._v("使用引入包")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" hello "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gp19-npm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2-2-12、脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-12、脚本"}},[s._v("#")]),s._v(" 2.2.12、脚本")]),s._v(" "),a("p",[s._v("Node开发离不开npm，而脚本功能是npm最强大、最常用的功能之一。")]),s._v(" "),a("p",[a("strong",[s._v("什么是npm脚本")])]),s._v(" "),a("p",[s._v("npm允许在package.json文件里面，使用scripts字段定义脚本命令")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node build.js"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("执行顺序")])]),s._v(" "),a("p",[s._v("如果npm脚本里面需要执行多个任务，那么需要明确它们的执行顺序")]),s._v(" "),a("p",[s._v("script1.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("script2.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"script1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node script1.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"script2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node script2.js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("如果是并行执行(即同时的平行执行)，可以使用"),a("code",[s._v("&")]),s._v("符号。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm run script1 & npm run script2\n")])])]),a("p",[s._v("如果是继发执行(即只有前一个任务成功，才执行下一个任务)，可以使用"),a("code",[s._v("&&")]),s._v("符号")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm run script1 && npm run script2\n")])])]),a("p",[a("strong",[s._v("简写形式")])]),s._v(" "),a("p",[s._v("常用的npm脚本简写形式")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm start 是 npm run start\nnpm test 是 npm run test\n")])])]),a("p",[a("strong",[s._v("变量")])]),s._v(" "),a("p",[s._v("npm脚本有一个非常强大的功能，就是可以使用npm的内部变量")]),s._v(" "),a("p",[s._v("首先，通过"),a("code",[s._v("npm_package_")]),s._v("前缀，npm脚本可以拿到package.json里面的字段。比如，下面是一个package.json。")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：一定要在 npm 脚本中运行（如：npm run view）才可以，直接在命令行中运行JS（如：node view.js）是拿不到值的")])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.2.5"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node view.js"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("那么，变量npm_package_name返回foo，变量npm_package_version返回1.2.5。")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// view.js")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// foo")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.2.5")]),s._v("\n")])])]),a("p",[s._v("上面代码中，我们通过环境变量"),a("code",[s._v("process.env")]),s._v("对象，拿到"),a("code",[s._v("package.json")]),s._v("的字段值。如果是Bash脚本，可以用"),a("code",[s._v("$npm_package_name")]),s._v("和"),a("code",[s._v("$npm_package_version")]),s._v("取到这两个值。")]),s._v(" "),a("p",[s._v("npm_package前缀也支持嵌套的package.json字段。")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nscripts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_package_repository_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo %npm_package_repository_type%"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("上面代码中，repository字段的type属性，可以通过"),a("code",[s._v("npm_package_repository_type")]),s._v("取到。")]),s._v(" "),a("p",[s._v("下面是另外一个例子。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"scripts": {\n  "install": "foo.js"\n}\n')])])]),a("p",[s._v("上面代码中，"),a("code",[s._v("npm_package_scripts_install")]),s._v("变量的值等于foo.js。")]),s._v(" "),a("p",[s._v("然后，npm脚本还可以通过npm_config前缀，拿到npm的配置变量，即"),a("code",[s._v("npm config get xxx")]),s._v("命令返回的值。比如，当前模块的发行标签，可以通过"),a("code",[s._v("npm_config_tag")]),s._v("取到。")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_config_tag"')]),s._v("\n")])])]),a("h3",{attrs:{id:"_2-2-13、npm安装git上发布的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-13、npm安装git上发布的包"}},[s._v("#")]),s._v(" 2.2.13、npm安装git上发布的包")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 这样适合安装公司内部的git服务器上的项目\nnpm install git+https://git@github.com:lurongtao/gp-project.git\n\n# 或者以ssh的方式\nnpm install git+ssh://git@github.com:lurongtao/gp-project.git\n")])])]),a("h3",{attrs:{id:"_2-2-14、cross-env使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-14、cross-env使用"}},[s._v("#")]),s._v(" 2.2.14、cross-env使用")]),s._v(" "),a("p",[s._v("cross-env是运行跨平台设置和使用环境变量的脚本")]),s._v(" "),a("p",[a("strong",[s._v("在windows系统")])]),s._v(" "),a("p",[s._v("当使用"),a("code",[s._v("NODE_ENV=production")]),s._v("，来设置环境变量时，大多数Windows命令提示将会阻塞(报错)。（异常是windows上的bash，它使用本机bash）所以，Windows不支持"),a("code",[s._v("NODE_ENV=production")]),s._v("的设置方式。")]),s._v(" "),a("p",[a("strong",[s._v("解决办法")])]),s._v(" "),a("p",[s._v("cross-env使得您可以使用单个命令，而不必担心为平台正确设置或使用环境变量。cross-env能够提供一个设置环境变量的scripts，让你能够以Unix方式设置环境变量，然后再Windows上也能兼容运行。")]),s._v(" "),a("p",[a("strong",[s._v("安装")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install --save-dev cross-env\n")])])]),a("p",[a("strong",[s._v("使用")])]),s._v(" "),a("p",[s._v("相当于当你执行这个webpack命令的时候，可以在其中加入NODE_ENV=production的环境变量。而使用这个corss-env的包，在其脚本前加上cross-env即可。")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=production webpack --config build/webpack.config.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NODE_ENV=production webpack --config build/webpack.config.js"')]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v('NODE_ENV环境变量将由cross-env设置打印process.env.NODE_ENV==="production"')]),s._v(" "),a("p",[a("strong",[s._v("示例")])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lisi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=lisi node index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"zhangsan"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=zhangsan node index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $npm_package_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo %npm_package_name%"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo %npm_package_config_name%"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"jquery"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.1.4"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cross-env"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.0.3"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"_2-3、nrm-npm-registry-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、nrm-npm-registry-manager"}},[s._v("#")]),s._v(" 2.3、NRM:npm registry manager")]),s._v(" "),a("h3",{attrs:{id:"_2-3-1、手工切换源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1、手工切换源"}},[s._v("#")]),s._v(" 2.3.1、手工切换源")]),s._v(" "),a("p",[a("strong",[s._v("查看当前源")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm config get registry\n")])])]),a("p",[a("strong",[s._v("切换淘宝源")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm config set registry https://registry.npm.taobao.org\n")])])]),a("h3",{attrs:{id:"_2-3-2、nrm管理源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2、nrm管理源"}},[s._v("#")]),s._v(" 2.3.2、NRM管理源")]),s._v(" "),a("p",[s._v("NRM(npm registry manager)是npm的镜像源管理工具，有时候国外资源太慢，使用这个就可以快速地在npm源间切换。")]),s._v(" "),a("p",[a("strong",[s._v("安装nrm")])]),s._v(" "),a("p",[s._v("在命令行执行命令，"),a("code",[s._v("npm install -g nrm")]),s._v("，全局安装nrm。")]),s._v(" "),a("p",[a("strong",[s._v("使用nrm")])]),s._v(" "),a("p",[s._v("执行命令"),a("code",[s._v("nrm ls")]),s._v("查看可选的源。其中，带*的是当前使用的源，上面的输出表明当前源是官方源。")]),s._v(" "),a("p",[a("strong",[s._v("切换nrm")])]),s._v(" "),a("p",[s._v("如果要切换到taobao源，执行命令"),a("code",[s._v("nrm use taobao")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("测试速度")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nrm test\n")])])]),a("h2",{attrs:{id:"_2-4、npx-npm-package-extention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4、npx-npm-package-extention"}},[s._v("#")]),s._v(" 2.4、NPX:npm package extention")]),s._v(" "),a("p",[s._v("npm从5.2版本开始，增加了npx命令。")]),s._v(" "),a("p",[s._v("Node自带npm模块，所以可以直接使用npx命令。万一不能用，就要手动安装一下。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -g npx\n")])])]),a("h3",{attrs:{id:"_2-4-1、调用项目安装的模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1、调用项目安装的模块"}},[s._v("#")]),s._v(" 2.4.1、调用项目安装的模块")]),s._v(" "),a("p",[s._v("npx想要解决的主要问题，就是调用项目内部安装的模块。比如，项目内部安装了Mocha。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -D mocha\n")])])]),a("p",[s._v("一般来说，调用Mocha，只能在项目脚本和package.json的scripts字段里面，如果想在命令行下调用，必须想下面这样。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("项目的根目录下执行\nnode-modules/.bin/mocha --version\n")])])]),a("p",[s._v("npx就是想解决这个问题，让项目内部安装的模块用起来更方便，只要像下面这样调用就行了。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npx mocha --version\n")])])]),a("p",[s._v("npx的原理很简单，就是运行的时候，会到node_modules/.bin路径和环境变量$PATH里面，检查命令是否存在。")]),s._v(" "),a("p",[s._v("由于npx会检查环境变量$PATH，所以系统命令也可以调用。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("等同于 ls\nnpx ls\n")])])]),a("p",[s._v("注意，Bash内置的命令不在$PATH里面，所以不能用。比如，cs是Bash命令，因此就不能用npx cd。")]),s._v(" "),a("h3",{attrs:{id:"_2-4-2、避免全局安装模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2、避免全局安装模块"}},[s._v("#")]),s._v(" 2.4.2、避免全局安装模块")]),s._v(" "),a("p",[s._v("除了调用项目内部模块，npx还能避免全局安装的模块。比如，create-react-app这个模块是全局安装，npx可以运行它，而且不进行全局安装。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" npx create-react-app my-react-app\n")])])]),a("p",[s._v("上面代码运行时，npx将"),a("code",[s._v("create-react-app")]),s._v("下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载"),a("code",[s._v("create-react-app")]),s._v("。")]),s._v(" "),a("p",[s._v("注意，只要npx后面的模块无法在本地发现，就会下载同名模块。比如，本地没有安装"),a("code",[s._v("http-server")]),s._v("模块，下面的命令就会自动下载该模块，在当前目录启动一个Web服务。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npx http-server\n")])])]),a("h3",{attrs:{id:"_2-4-3、-no-install参数和-ignore-existing参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-3、-no-install参数和-ignore-existing参数"}},[s._v("#")]),s._v(" 2.4.3、--no-install参数和--ignore-existing参数")]),s._v(" "),a("p",[s._v("如果想让npx强制使用本地模块，不下载远程模块，可以使用"),a("code",[s._v("--no-install")]),s._v("参数。如果本地不存在该模块，就会报错。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npx --no-install http-server\n")])])]),a("p",[s._v("反过来，如果忽略本地的同名模块，强制安装使用远程模块，可以使用"),a("code",[s._v("--ignore-existing")]),s._v("参数。比如，本地已经安装了"),a("code",[s._v("http-server")]),s._v("，但还是想使用远程模块，就用这个参数。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npx --ignore-existing http-server\n")])])]),a("h1",{attrs:{id:"_3、模块-包与commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、模块-包与commonjs"}},[s._v("#")]),s._v(" 3、模块/包与CommonJS")]),s._v(" "),a("h2",{attrs:{id:"_3-1、模块-包分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、模块-包分类"}},[s._v("#")]),s._v(" 3.1、模块/包分类")]),s._v(" "),a("p",[s._v("Node.js有三类模块。即内置的模块、第三方的模块、自定义的模块。")]),s._v(" "),a("h3",{attrs:{id:"_3-1-1、内置的模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1、内置的模块"}},[s._v("#")]),s._v(" 3.1.1、内置的模块")]),s._v(" "),a("p",[s._v("Node.js内置模块又叫核心模块，Node.js安装完成可直接使用。如：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" extname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("extname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("extname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3-1-2、第三方的node-js模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2、第三方的node-js模块"}},[s._v("#")]),s._v(" 3.1.2、第三方的Node.js模块")]),s._v(" "),a("p",[s._v("第三方的Node.js模块指的是为了实现某些功能，发布的npmjs.org上的模块，按照一定的开源协议供社群使用。如：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install chalk\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" chalk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chalk'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chalk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("blue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello world!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3-1-3、自定义的node-js模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3、自定义的node-js模块"}},[s._v("#")]),s._v(" 3.1.3、自定义的Node.js模块")]),s._v(" "),a("p",[s._v("自定义的Node.js模块，也叫文件模块，是我们自己写的供自己使用的模块。同时，这类模块发布到npmjs.org上就成了开源的第三方模块。")]),s._v(" "),a("p",[s._v("自定义模块是在运行时动态加载，需要完整的路径分析、文件定位、编译执行过程、速度相比核心模块稍微慢一些，但是用的非常多。")]),s._v(" "),a("p",[a("strong",[s._v("模块定义、接口暴露和引用接口")])]),s._v(" "),a("p",[s._v("我们可以把公共的功能抽离成为一个单独的js文件作为一个模块，默认情况下面这个模块里面的方法或者属性，外面是没法访问的。如果要让外部可以访问模块里面的方法或者属性，就必须在模块里面通过exports或者module.exports暴露属性或者方法。")]),s._v(" "),a("p",[s._v("m1.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gp19'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("sayName")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module 1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口暴露方法一：")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  say"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sayName\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口暴露方法二：")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("say "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sayName\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 错误！")]),s._v("\nexports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  say"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sayName\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("main.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" m1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./m1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("say")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[a("strong",[s._v("模块的循环引用")])]),s._v(" "),a("p",[s._v("由于exports使用方式不对，会在两个不同js循环引用的情况下，导致其中一个js无法获取另外一个js的方法，从而导致执行报错。如：")]),s._v(" "),a("p",[s._v("a.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./b.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'in a, b.done = %j'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a done'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("b.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b starting'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'in b, a.done = %j'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b done'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("main.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'main starting'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./b.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'in main, a.done = %j, b.done = %j'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("main.js首先会load a.js，此事执行到"),a("code",[s._v("const b = require('./b.js')")]),s._v("的时候，程序会转去load b.js，在b.js中执行到"),a("code",[s._v("const a = require('./a.js')")]),s._v("为了防止无限循环，将a.js exports的未完成副本返回到b.js模块。然后b.js完成加载，并将其导出对象提供给a.js模块。")]),s._v(" "),a("p",[s._v("我们知道NodeJS的对每个js文件进行了一层包装称为module，module中有一个属性exports，当调用require('a.js')的时候，其实返回的是module.exports对象，module.exports初始化为一个{}空的object，所以在上面的例子中，执行到b.js中"),a("code",[s._v("const a = require('./a.js')")]),s._v("时不会Load新的a module，而是将已经load但是还未完成的a module的exports属性返回给b module，所以b.js拿到的是a module的exports对象，即：{done: false},虽然在a.js中exports.done被修改了true，但是由于此时a.js为load完成，所以在b.js输出的a module的属性done为false，而在main.js中输出的a module的属性done为true。NodeJS通过上面这种返回未完成exports对象来解决循环引用的问题。")])])}),[],!1,null,null,null);t.default=e.exports}}]);